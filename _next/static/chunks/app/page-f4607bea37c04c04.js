(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{2959:function(e,r,t){Promise.resolve().then(t.bind(t,8929))},8929:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return z}});var o=t(7437),a=t(345),l=t.n(a),s=t(8227);let n=["R","YR","Y","GY","G","BG","B","PB","P","RP"],i=(e,r)=>10*n.indexOf(e)+r,c=e=>({hueName:n[Math.floor(e.hue100/10)],huePrefix:e.hue100%10,value:e.value,chroma:e.chroma}),h=e=>({hue100:i(e.hueName,e.huePrefix),value:e.value,chroma:e.chroma}),u=e=>{let r=i(e.hueName,e.huePrefix),[t,o,a]=(0,s.mhvcToRgb255)(r,e.value,e.chroma,!1);return t<0||t>255||o<0||o>255||a<0||a>255};var d=t(2265),x=t(4076),m=t.n(x);let p=e=>{let{options:r,value:t,onChange:a}=e,[l,s]=(0,d.useState)(t),[n,i]=(0,d.useState)(!1),c=e=>{s(e),a(e)};return(0,o.jsx)("table",{className:m()["horizontal-table"],onMouseLeave:()=>i(!1),children:(0,o.jsx)("tbody",{children:(0,o.jsx)("tr",{children:r.map(e=>(0,o.jsx)("td",{className:e===l?m().selected:"",onMouseDown:()=>i(!0),onMouseUp:()=>i(!1),onMouseEnter:()=>{n&&c(e)},onClick:()=>c(e),children:String(e)},String(e)))})})})},v=e=>{let[r,t]=(0,d.useState)(e.value);return(0,o.jsxs)("div",{className:m()["slider-container"],children:[(0,o.jsx)("input",{className:m().slider,type:"range",min:e.min,max:e.max,value:r,step:e.step,onChange:r=>{let o=Number(r.target.value);t(o),e.onChange(o)}}),(0,o.jsx)("div",{children:r.toFixed(1)})]})};var _=e=>{let{initColor:r,onChange:t}=e,[a,l]=(0,d.useState)(r),s=e=>{let r={...a,...e};t(r),l(r)};return(0,o.jsxs)("div",{className:m()["relative-container"],children:[(0,o.jsxs)("dl",{className:m().row,children:[(0,o.jsx)("dt",{children:"Hue"}),(0,o.jsx)("dd",{children:(0,o.jsx)(p,{options:Array.from(n),value:a.hueName,onChange:e=>s({hueName:e})})}),(0,o.jsx)("dt",{children:"Prefix"}),(0,o.jsx)("dd",{children:(0,o.jsx)(p,{options:[1,2,3,4,5,6,7,8,9,10],value:a.huePrefix,onChange:e=>s({huePrefix:e})})})]}),(0,o.jsxs)("dl",{className:m().row,children:[(0,o.jsx)("dt",{children:"Value"}),(0,o.jsx)("dd",{children:(0,o.jsx)(v,{min:0,max:10,value:a.value,step:.1,onChange:e=>s({value:e})})}),(0,o.jsx)("dt",{children:"Chroma"}),(0,o.jsx)("dd",{children:(0,o.jsx)(v,{min:0,max:30,value:a.chroma,step:.5,onChange:e=>s({chroma:e})})})]})]})},f=t(1509),g=t.n(f);let j=e=>{let{userHex:r,systemHex:t,systemColorDirection:a}=e,l=(0,d.useRef)(null);return(0,d.useEffect)(()=>{let e=l.current;if(e){let r=e.getContext("2d");if(r){if(t){r.fillStyle=t;let o={top:[0,0,e.width,e.height/2],right:[e.width/2,0,e.width/2,e.height],bottom:[0,e.height/2,e.width,e.height/2],left:[0,0,e.width/2,e.height]}[a];r.fillRect(...o)}else r.clearRect(0,0,e.width,e.height)}}},[t,a]),(0,o.jsx)("canvas",{ref:l,style:{backgroundColor:r},className:g()["color-canvas"]})},C=e=>{let{describedColor1:r,paintedColor1:t,color2:a,scoreInfo:l}=e,n=e=>(0,s.mhvcToHex)(e.hue100,e.value,e.chroma),i=e=>(0,s.mhvcToMunsell)(e.hue100,e.value,e.chroma,1);return(0,o.jsxs)("div",{className:g()["color-area-container"],children:[(0,o.jsxs)("div",{className:g()["user-color-cell"],children:[(0,o.jsx)("div",{children:"Your input:"}),(0,o.jsx)("div",{className:g()["color-label"],children:i(r)})]}),(0,o.jsx)("div",{className:g()["canvas-cell"],children:(0,o.jsx)(j,{userHex:n(t),systemHex:a&&n(a),systemColorDirection:"right"})}),(0,o.jsx)("div",{className:g()["system-color-cell"],children:a&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{children:"Answer:"}),(0,o.jsx)("div",{className:g()["color-label"],children:a&&i(a)}),l&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{children:"Score:"}),(0,o.jsxs)("div",{children:[l.score.toFixed(1)," ",(0,o.jsx)("span",{className:g().weak,children:"(Î”E=".concat(l.delta.toFixed(1),")")})]})]})]})})]})},M=2*Math.PI,b=(e,r)=>{let t=e%r;return t>=0?t:t+r},y=30*M/360,N=6*M/360,w=63*M/360,P=60*M/360,I=275*M/360,S=1/(25*M/360),E=(e,r)=>{let[t,o,a]=e,[l,s,n]=r,i=Math.pow((Math.sqrt(o*o+a*a)+Math.sqrt(s*s+n*n))*.5,7),c=(1-Math.sqrt(i/(i+6103515625)))*.5,h=o+o*c,u=s+s*c,d=Math.sqrt(h*h+a*a),x=Math.sqrt(u*u+n*n),m=(d+x)*.5,p=Math.pow(m,7),v=b(Math.atan2(a,h),M),_=b(Math.atan2(n,u),M),f=_-v,g=0;0===d||0===x?(f=0,g=v+_):Math.abs(f)<=Math.PI?g=(v+_)*.5:(_<=v?f+=M:f-=M,g=v+_<M?(v+_+M)*.5:(v+_-M)*.5);let j=Math.sqrt(d*x)*Math.sin(.5*f)*2,C=1-.17*Math.cos(g-y)+.24*Math.cos(2*g)+.32*Math.cos(3*g+N)-.2*Math.cos(4*g-w),E=(t+l)*.5-50,R=E*E,k=(g-I)*S,q=(l-t)/(1+.015*R/Math.sqrt(20+R)),D=(x-d)/(1+.045*m),F=j/(1+.015*m*C);return Math.sqrt(q*q+D*D+F*F+-2*Math.sqrt(p/(p+6103515625))*Math.sin(P*Math.exp(-k*k))*D*F)},R=(e,r)=>{let t=h(e),o=h(r);return E((0,s.mhvcToLab)(t.hue100,t.value,t.chroma),(0,s.mhvcToLab)(o.hue100,o.value,o.chroma))};var k=t(3761),q=t.n(k),D=e=>{let{value:r,maxVal:t}=e;return(0,o.jsx)("div",{className:q()["progress-bar"],children:(0,o.jsx)("div",{className:q()["progress-bar_filler"],style:{width:"".concat(r/t*100,"%")}})})};let F=(e,r)=>"forward"===r.type?T(e):{...e,userInputColor:r.color,userAlternativeColor:u(r.color)?e.userAlternativeColor:r.color},A=()=>{let e=()=>Math.min(Math.floor(256*Math.random()),255),[r,t,o]=(0,s.rgb255ToMhvc)(e(),e(),e());return c({hue100:r,value:t,chroma:o})},G=e=>"answer"===e.type&&e.index+1>=10,T=e=>{switch(e.type){case"question":return{...e,type:"answer",index:e.index};case"answer":if(G(e))return{...e,type:"freeMode"};return{...e,type:"question",index:e.index+1,colorInQuestion:A()};case"freeMode":return{...e,type:"question",index:0,colorInQuestion:A()};default:throw Error("Invalid appState")}},Y=e=>{switch(e.type){case"question":return"Submit";case"answer":if(e.index+1>=10)return"Finish";return"Go to next (".concat(e.index+2,"/").concat(10,")");case"freeMode":return"Start problem set";default:throw Error("Invalid appState")}},B=e=>{switch(e.type){case"question":return{describedColor1:h(e.userInputColor),paintedColor1:h(e.colorInQuestion)};case"answer":let r=R(e.userInputColor,e.colorInQuestion);return{describedColor1:h(e.userInputColor),paintedColor1:h(e.userAlternativeColor),color2:h(e.colorInQuestion),scoreInfo:{delta:r,score:L(r)}};case"freeMode":return{describedColor1:h(e.userInputColor),paintedColor1:h(e.userAlternativeColor)};default:throw Error("Invalid appState")}},L=function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;return Math.max(10/(r-t)*(r-Math.max(e,t)),0)},O=e=>100===e?"Perfect":e>=90?"Excellent":e>=80?"Great":e>=70?"Very good":e>=60?"Good":e>=40?"Fair":"Poor",Q={hueName:"PB",huePrefix:5,value:3,chroma:5};function z(){let[e,r]=(0,d.useReducer)(F,{type:"freeMode",userInputColor:Q,userAlternativeColor:Q}),t=(0,d.useRef)(0),a=()=>{"answer"===e.type&&(t.current+=L(R(e.userInputColor,e.colorInQuestion))),G(e)&&(t.current=0)};return(0,o.jsxs)("main",{children:[(0,o.jsxs)("div",{className:l()["top-half"],children:[(0,o.jsx)("div",{className:l()["relative-container"],children:(0,o.jsx)("h1",{className:l().title,children:"Guess Munsell Code"})}),(0,o.jsx)("div",{className:l()["right-header"],children:(0,o.jsx)("a",{href:"https://github.com/privet-kitty/albert/blob/master/README.md",children:"README"})}),(0,o.jsx)("div",{children:(0,o.jsx)(C,{...B(e)})})]}),(0,o.jsx)("div",{className:l()["bottom-half"],children:(0,o.jsxs)("div",{className:l()["relative-container"],children:[(0,o.jsx)("div",{className:u(e.userInputColor)?l()["out-of-gamut-overlay"]:""}),(0,o.jsx)(_,{initColor:Q,onChange:e=>r({type:"selectColor",color:e})}),(0,o.jsx)("div",{className:l()["centering-container"],children:(0,o.jsx)("button",{type:"button",onClick:()=>{r({type:"forward"}),a()},className:l()["transition-button"],children:Y(e)})})]})}),(0,o.jsxs)("div",{className:l().footer,children:[(0,o.jsx)(D,{value:"freeMode"===e.type?0:e.index+("answer"===e.type?1:0),maxVal:10}),G(e)&&(0,o.jsx)("div",{className:l().evaluation,children:"Total Score: ".concat(t.current.toFixed(1)," ").concat(O(t.current))})]})]})}},345:function(e){e.exports={"top-half":"page_top-half__5de6g","bottom-half":"page_bottom-half__4xKI3","relative-container":"page_relative-container__exxMw",title:"page_title__3jonF","right-header":"page_right-header__9i89C","out-of-gamut-overlay":"page_out-of-gamut-overlay__c9c1i","centering-container":"page_centering-container__LOiEO","transition-button":"page_transition-button__RURxR",footer:"page_footer__sHKi3",evaluation:"page_evaluation__tLGEY"}},1509:function(e){e.exports={weak:"ColorDisplayPanel_weak__DTgRp","color-area-container":"ColorDisplayPanel_color-area-container__klFO7","canvas-cell":"ColorDisplayPanel_canvas-cell__S0RDN","color-canvas":"ColorDisplayPanel_color-canvas__w8llF","user-color-cell":"ColorDisplayPanel_user-color-cell__sNrlw","system-color-cell":"ColorDisplayPanel_system-color-cell__WtuhE","color-label":"ColorDisplayPanel_color-label__kJ5UY"}},4076:function(e){e.exports={row:"MunsellColorSelector_row__EeK2T",selected:"MunsellColorSelector_selected__v5Zou","horizontal-table":"MunsellColorSelector_horizontal-table__4tYzg","slider-container":"MunsellColorSelector_slider-container__l4ZUG",slider:"MunsellColorSelector_slider__kzCiY"}},3761:function(e){e.exports={"progress-bar":"ProgressBar_progress-bar__2VcL3","progress-bar_filler":"ProgressBar_progress-bar_filler__xmyDc"}}},function(e){e.O(0,[134,227,971,69,744],function(){return e(e.s=2959)}),_N_E=e.O()}]);